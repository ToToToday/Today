@model Today.Web.ViewModels.ClassifyVM

@using System.Web;
@using Newtonsoft.Json

<!-- 導覽列 -->
@*導覽列下的三個BUTTON*@
<div class="container city-filter-wrap position-fixed pt-2">
    <div class="sidebar d-flex mx-0 px-3 bg-white">
        <!-- 第一版 目的地-->
        <div class="city-filter-btn d-flex">
            <button class="btn btn-white shadow-none mx-1 my-2 text-nowrap rounded-pill" type="button"
                data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">
                目的地<i class="fa-solid fa-caret-down ms-2"></i>
            </button>
        </div>
        <!-- 目的地-展開 -->
        <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasBottom"
            aria-labelledby="offcanvasBottomLabel">
            <!-- 目的地-導覽列 -->
            <div class="offcanvas-header border-bottom">
                <button id="button-demo" type="button" class="btn-clean-destination text-reset border-0 bg-white"
                    aria-label="Close">清除</button>
                <h5 class="offcanvas-title m-auto" id="offcanvasBottomLabell">目的地</h5>
                <button type="button" class="btn-finish-destination text-reset border-0 bg-white">完成</button>
            </div>
            <div class="offcanvas-body small">
                <div class="filter-group rounded pt-3 mb-3">
                    <!-- 搜尋input -->
                    <div class="input-group">
                        <div
                            class="input-group-text d-flex fa-solid fa-magnifying-glass bg-white ms-1 rounded-pill w-100">
                            <input class="form-control search border-0 ms-2" type="search" placeholder="搜尋目的地 ">
                        </div>
                    </div>

                    <div class="accordion-item border-0">
                        <!-- checkbox標題 -->
                        <div class="accordion-header text-dark mt-3 ms-2 me-1" id="headingOne">
                            <h2 class="accordion-button collapsed fw-normal" data-bs-toggle="collapse"
                                data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                台灣
                            </h2>
                        </div>
                        <!-- checkbox內文 -->
                        <div id="collapseOne" class="accordion-collapse collapse " aria-labelledby="headingOne"
                            data-bs-parent="#accordionExample">
                            <div class="accordion-body-input m-2">
                                @foreach (var item in Model.ClassifyCardList)
                                {
                                    <div class="form-check pb-2">
                                        <label class="form-check-label ms-1 mt-1">
                                            <input class="form-check-input mt-0 city_PC shadow-none" type="checkbox"value="@item.CityId" onchange="postAndChangePages()">@item.CityId
                                        </label>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 第二個版 更多條件 -->
        <div class="city-filter-btn d-flex ps-1">
            <button class="btn btn-white shadow-none mx-1 my-2 text-nowrap rounded-pill" type="button"
                data-bs-toggle="offcanvas" data-bs-target="#moreconditions" aria-controls="moreconditions">
                更多條件<i class="fa-solid fa-caret-down ms-2"></i>
            </button>
        </div>
        <!-- 更多條件-展開 -->
        <div class="offcanvas offcanvas-bottom rounded-top" tabindex="-1" id="moreconditions"
            aria-labelledby="offcanvasBottomLabel">
            <!-- 更多條件-導覽列 -->
            <div class="offcanvas-header border-bottom">
                <button type="button" class="btn-clean-destination text-reset border-0 bg-white"
                    aria-label="Close">清除</button>
                <h5 class="moreconditions offcanvas-title m-auto" id="offcanvasBottomLabell">更多條件</h5>
                <button type="button" class="btn-finish-destination text-reset border-0 bg-white">完成</button>
            </div>
            <!-- 裡面內文 -->
            <div class="offcanvas-body small p-0">
                <!-- 使用日 -->
                <div class="filter-group rounded">
                    <div class="filter-block">
                        <!-- 使用日-請選擇使用日 -->
                        <dib class="accordion-header" id="Attractions">
                            <h4 class=" collapsed fw-normal border-bottom d-flex " data-bs-target="#collapsedayofuse"
                                aria-expanded="false">
                                <input type="button" name="datefilter" value="請選出發日期"
                                    class="fa-regular fa-calendar btn btn-outline-white text-dark flex-grow-1 fs-6 fw-bolder lh-lg"
                                    placeholder="篩選出發日期" id="collapsedayofuse" line-height: 2;">
                                @*<span class="fs-6 px-3 py-2 ms-1 w-100 d-flex justify-content-between
                                    align-items-center ">
                                    請選擇使用日
                                    </span>*@
                            </h4>
                        </dib>
                    </div>
                </div>
                <!-- 更多條件 -->
                <div class="filter-group rounded mb-1">
                    <div class="filter-block ">
                        <!-- 更多條件-所有商品類別 -->
                        <div class="accordion-header " id="Attractions">
                            <h4 class="accordion-button collapsed fw-normal " data-bs-toggle="collapse"
                                data-bs-target="#collapseAttractiontickets1" aria-expanded="false">
                                所有商品類別
                            </h4>
                        </div>
                        <!-- 更多條件-所有商品類別-類別內容 -->
                        <div id="collapseAttractiontickets1" class="accordion-collapse collapse px-2"
                            data-bs-parent="#accordionExample">
                            <partial name="ClassifyCollapsePartial/_CollapsePartial" for="CategoryList" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 第三個版 排序 -->
        <div class="city-filter-btn d-flex ps-1">
            <button class="btn btn-white shadow-none mx-1 my-2 text-nowrap rounded-pill" type="button"
                data-bs-toggle="offcanvas" data-bs-target="#sort" aria-controls="sort">
                排序<i class="fa-solid fa-caret-down ms-2"></i>
            </button>
        </div>
        <!-- 排序-展開 -->
        <div class="sort offcanvas offcanvas-bottom" tabindex="-1" id="sort" aria-labelledby="offcanvasBottomLabel">
            <!-- 排序-導覽列 -->
            <div class="offcanvas-header border-bottom">
                <button type="button" class="btn-clean-destination text-reset border-0 bg-white"
                    aria-label="Close">清除</button>
                <h5 class="offcanvas-title m-auto" id="offcanvasBottomLabell">排序</h5>
                <button type="button" class="btn-finish-destination text-reset border-0 bg-white">完成</button>
            </div>
            <!-- 排序-內文 -->
            <div class="offcanvas-body small px-0">
                <div class="accordion-item border-0 ">
                    <div class="form-check mb-2 py-2 border-bottom d-flex align-items-center justify-content-between">
                        <label class="form-check-label ms-2 mt-1 " for="Taipei">KKday 推薦</label>
                        <i class="fa-solid fa-check me-4"></i>
                    </div>
                    <div class="form-check mb-2 py-2 border-bottom d-flex align-items-center justify-content-between">
                        <label class="form-check-label ms-2 mt-1" for="Taichung">熱門程度 : 高至低</label>
                        <i class="fa-solid fa-check me-4"></i>
                    </div>
                    <div class="form-check mb-2 py-2 d-flex align-items-center justify-content-between">
                        <label class="form-check-label ms-2 mt-1" for="Kaohsiung">價格 : 低至高</label>
                        <i class="fa-solid fa-check me-4"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid-ProductList ">
    <section class="container m-auto">
        <div class="container row p-0 m-0" id="classifyCard">
            <!--左側欄 -->
            <div class="col-lg-3 product-filter px-3 pt-3">
                <!-- 篩選目的地 -->
                <div class="filter-group rounded pt-3 mb-3">
                    <div class="filter-block py-2 pb-3 ps-3 ">
                        <h4>篩選目的地</h4>
                    </div>
                    <div class="input-group d-flex pt-1 pb-2 ps-2">
                        <div class="input-group-text fa-solid fa-magnifying-glass border-end-0 bg-white ms-1">
                        </div>
                        <input id="destFilter" name="searchword"
                            class="form-control search border-start-0 me-4 shadow-none" type="text"
                            placeholder="搜尋目的地 ">
                    </div>
                    <div class="accordion-item ">
                        <div class="accordion-header" id="headingOne">
                            <h2 class="accordion-button collapsed fw-normal" data-bs-toggle="collapse"
                                data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                台灣
                            </h2>
                        </div>
                        <!-- 台灣checkbox -->
                        <div id="collapseOne" class="accordion-collapse collapse " aria-labelledby="headingOne"
                            data-bs-parent="#accordionExample">
                            <div class="accordion-body ">
                                @foreach (var item in Model.ClassifyCardList)
                                {
                                    <div class="form-check pb-2">
                                        <label class="form-check-label ms-1 mt-1 cityfilter">
                                            <input class="form-check-input mt-0 city_PC selfform-city shadow-none"type="checkbox"value="@item.CityId"onchange="postAndChangePages()">@item.CityName
                                        </label>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 所有商品類別 -->
                <div class="filter-group rounded py-2 mb-1">
                    <div class="filter-block py-3 ps-3">
                        <h4>所有商品類別</h4>
                    </div>
                    <!-- 景點門票 -->
                    <partial name="ClassifyCollapsePartial/_CollapsePartial" for="CategoryList" />
                </div>
                <!-- 篩選出發日期 -->
                <div class="filter-group date rounded ">
                    <div class="filter-block mt-3">
                        <div class="accordion-item">
                            <div class="input-group p-2 mb-3">
                                <label for="" class="w-100">
                                    <button
                                        class="fa-regular fa-calendar btn btn-outline-white text-dark border-end p-2"
                                        type="button" name="datefilter">
                                    </button>
                                    <input type="button" name="datefilter" value="篩選出發日期"
                                        class="fa-regular fa-calendar btn btn-outline-white text-dark flex-grow-1 fs-6 fw-bolder"
                                        placeholder="篩選出發日期">
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 價錢 range -->
                <div class="filter-group rounded ">
                    <div class="filter-block mt-3">
                        <div class="accordion-item">
                            <div class="accordion-header pt-3 pb-4 mx-3" id="headingThree">
                                <h4 class="Pricies">價錢 (TWD)</h4>
                                <div class="wrapper">
                                    <div class="wrapper pt-3">
                                        <span id="range1">
                                            0
                                        </span>
                                        <span> &dash; </span>
                                        <span id="range2">
                                            2,928,980
                                        </span>
                                    </div>
                                    <div class="container mt-4">
                                        <div class="slider-track "></div>
                                        <input class="bg-white shadow-none" type="range" min="0" max="99999" value="00"
                                            id="slider-1" oninput="slideOne()">
                                        <input type="range" min="0" max="99999" value="123456" id="slider-2"
                                            oninput="slideTwo()">
                                    </div>
                                </div>
                            </div>
                            <span class="rounded-circle" style="left:0%;"></span>
                        </div>
                    </div>
                </div>
                <!-- 行程時間 -->
                <div class="filter-group rounded">
                    <div class="filter-block mt-3">
                        <div class="accordion-item">
                            <div class="accordion-header " id="headingThree">
                                <h2 class="accordion-button collapsed fw-normal" data-bs-toggle="collapse"
                                    data-bs-target="#journeytime" aria-expanded="false">
                                    行程時間
                                </h2>
                            </div>
                            <div id="journeytime" class="accordion-collapse collapse show"
                                data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <div class="form-check-time ps-2 py-2">
                                        <input class="form-check-input mt-1" type="checkbox" value=""
                                            id="lessthanfourhours">
                                        <label class="form-check-label ms-1 mt-1" for="lessthanfourhours">
                                            少於 4 小時
                                        </label>
                                    </div>
                                    <div class="form-check-time ps-2 py-2">
                                        <input class="form-check-input mt-1" type="checkbox" value=""
                                            id="fourhours-oneday">
                                        <label class="form-check-label ms-1 mt-1" for="fourhours-oneday">
                                            4 小時 - 1 日
                                        </label>
                                    </div>
                                    <div class="form-check-time ps-2 py-2">
                                        <input class="form-check-input mt-1" type="checkbox" value=""
                                            id="oneday-twoday">
                                        <label class="form-check-label ms-1 mt-1" for="oneday-twoday">
                                            1 日 - 2 日
                                        </label>
                                    </div>
                                    <div class="form-check-time ps-2 py-2">
                                        <input class="form-check-input mt-1" type="checkbox" value=""
                                            id="morethantwodays">
                                        <label class="form-check-label ms-1 mt-1" for="morethantwodays">
                                            2 日以上
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--右側欄 -->
            <div class="col-lg-9 pt-3 p-2">
                <!-- 體驗行程 -->
                <div class="card-board mb-3 border-0">
                    <div class="card-board mb-3 border-0">
                        <div class="card-board mb-3 border-0">
                            <div class="card-body text-secondary">
                                <div class="chip-group d-flex flex-wrap">
                                    <h4 class="card-title_group align-self-center ms-1 d-flex flex-wrap">
                                        <span
                                            class="experience-itinerary text-dark align-self-center mx-1 fw-normal">7991</span>項體驗行程
                                    </h4>
                                    @*<span class="rounded-pill border border-secondary d-flex align-items-center">
                                        <span class="">飯店</span>
                                        <button type="button" class="btn-close" disabled="" aria-label="Close"></button>
                                        </span>

                                        <span class="chip-clear rounded-pill d-flex align-items-center ">
                                        <a href="#" class="a text-decoration-none text-light">清除所有</a>
                                        </span>*@
                                </div>
                            </div>
                            <div
                                class="card-footer bg-transparent d-flex flex-wrap py-3 ps-4 border-bottom-0 align-items-center">
                                <h5 class=" me-2">排序 : </h5>
                                <div class="sort">
                                    <i class="fa-regular fa-thumbs-up"></i>
                                    <a href="#" class="text-decoration-none">
                                        <span class="sort">Today推薦</span>
                                    </a>
                                </div>
                                <div class="sort">
                                    <span class="span_divider mx-1 "> | </span>
                                    <i class="fa-solid fa-fire"></i>
                                    <a href="#" class="text-decoration-none">
                                        <span class="sort">熱門程度</span>
                                    </a>
                                </div>
                                <div class="sort">
                                    <span class="span_divider mx-1 "> | </span>
                                    <i class="fa-solid fa-star "></i>
                                    <a href="#" class="text-decoration-none">
                                        <span class="sort">用戶評價</span>
                                        <span class="span_divider mx-1 "> | </span>
                                    </a>
                                </div>
                                <div class="sort">
                                    <a href="#" class="text-decoration-none">
                                        <i class="fa-solid fa-dollar-sign"></i>
                                        <span class="sort">價格 : 低到高</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 橫向卡牌 -->
                <div class="container_card">
                    <div v-for="(item,idx) in productCards" class="card_detail mb-3">
                        <a :href="item.href">
                            <div class="row g-0">
                                <div class="col-md-4 ">
                                    <div class="pic h-100">
                                        <img class="img-fluid w-100 h-100 m-auto"
                                             :src="item.path">
                                        @*<i class="fa-solid fa-heart btn-wish p-3 pt-4"></i>*@
                                    </div>
                                </div>
                                <div class="col-md-8 rounded-3 ">
                                    <div class="card-body">
                                        <h4 class="card-title text-dark">{{item.productName}}</h4>
                                        <div class="card-point py-2 ">
                                            <span v-for="t in  item.tagText"
                                                class="label label-addational rounded-3 ">{{(t)}}</span>
                                        </div>
                                        <div class="product-listview_inco_info d-flex flex-wrap my-2 me-2">
                                            <i class="fa-solid fa-location-dot"></i>
                                            <div class="product-listview_inco_info flex_item product-palce">
                                                <p class="card-text d-flex ms-2">
                                                    {{item.cityName}}
                                                </p>
                                            </div>
                                            @*<i class="fa-regular fa-calendar ms-3"></i>
                                                <div class="product-listview_inco_info product-time">
                                                <p class="card-text ms-2">
                                                最早可預訂日期 : 今日
                                                </p>
                                                </div>*@
                                        </div>
                                        <div class="footer  d-flex flex-wrap">
                                            @*<div class="product_footer m-auto col-8 mt-3">
                                                <i class="fa-solid fa-star"> {{item.ratingStar}}</i>
                                                <span class="number">{{(item.totalComment)}}</span>
                                                <i class="fa-solid fa-fire py-2">

                                                <span class="subscription">{{item.totalOrder}}個已訂購</span>
                                                </i>
                                                </div>
                                                //*@
                                            <div class="product_footer m-auto col-8 mt-3">
                                                <i class="fa-solid fa-star"></i>{{item.ratingStar}}
                                                <span class="number">{{(item.totalComment)}}</span>
                                                <span class="span_divider mx-1"> | </span>
                                                <i class="fa-solid fa-fire py-2">
                                                    <span class="subscription ms-1">{{item.totalOrder}}個已訂購</span>
                                                </i>

                                            </div>

                                            <div
                                                class="doller d-flex flex-wrap justify-content-end align-items-baseline col-4 ps-2">
                                                <p class="TWD-line OriginalPrice text-decoration-line-through m-0 mx-1">
                                                    TWD {{item.prices.originalPrice}}</p>
                                                @*<div class="discount mx-1 ms-2 p-1">73%OFF</div>*@
                                                <h4 class="TWD d-flex Price justify-content-end p-1 mt-1 text-derk">TWD
                                                    {{item.prices.price}}</h4>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>

                </div>
                <!-- 頁數切換 -->
                <div class=" page btn-group d-flex " role="group" aria-label="Basic radio toggle button group">
                    <label v-for="(x,i) in Math.ceil(cardCount/10)" class="click_num btn  me-2 ">
                        <input type="radio" class="btn-check" name="pageRadio" autocomplete="off" :value="x"
                            v-if="x == page" checked>

                        <input type="radio" class="btn-check" name="pageRadio" onclick="changeColor()" id="btn"
                            autocomplete="off" :value="x" v-else v-on:change='choosePage(x)'>
                        {{x}}
                    </label>
                </div>
            </div>
        </div>
    </section>
</div>

@section topCSS{
<link rel="stylesheet" href="~/css/reset.css" />
@*<link rel="stylesheet" href="~/css/daterangepicker.css" />*@
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
<link rel="stylesheet" href="~/css/Classify.css">
<link rel="stylesheet" href="~/css/MoneyRange.css">
}
@section endJS{
@*<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>*@
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script src="~/js/calendar.js"></script>
@*<script type="text/javascript" src="~/js/classifyCollect.js"></script>*@

@*vue*@
<script src="https://cdn.jsdelivr.net/npm/vue@2.7.7/dist/vue.js"></script>
@*<script src="https://unpkg.com/vue@next"></script>*@
<script>
    const classifyCardVue = new Vue({
        // 掛載位置
        el: '#classifyCard',
        // 資料, state
        data: {
            page: 1,
            cardCount: 1,
            productCards: [
                {
                    //href: '',
                    //path: '',
                    //productName: '',
                    //tagText: [],
                    //cityName: '',
                    //Price: '',
                    productId: '1',
                    href: '',
                    path: '',
                    productName: '',
                    tagText: [],
                    cityName: '',
                    ratingStar: '',
                    totalComment: '',
                    //originalPrice:'',
                    //unitPrice:'1',
                    prices: {
                        originalPrice: '',
                        price: '',
                    }
                    favorite: false
                },
                {
                    productId: '1',
                    href: '',
                    path: '',
                    productName: '',
                    tagText: [],
                    cityName: '',
                    ratingStar: '',
                    totalComment: '',
                    prices: {
                        originalPrice: '',
                        unitPrice: '',
                    }
                    favorite: false
                },
            ]
        },
        methods: {
            //pageRadio
            choosePage(page) {
                filterPost(page)
            },
        },
        mounted() {
            this.choosePage(1)
            //this.productCards = JSON.parse(' Html.Raw( JsonConvert.SerializeObject(Model.ClassifyCardList) ) ')
            //this.cardCount = @Model.CardCount
        },
    })
</script>

@*日期篩選*@
<script type="text/javascript">
    $(function () {
        $('input[name="datefilter"]').daterangepicker({
            autoUpdateInput: false,
            locale: {
                cancelLabel: 'Clear'
            }
        });

        $('input[name="datefilter"]').on('apply.daterangepicker', function (ev, picker) {
            $(this).val(picker.startDate.format('MM/DD/YYYY') + ' - ' + picker.endDate.format('MM/DD/YYYY'));
        });

        $('input[name="datefilter"]').on('cancel.daterangepicker', function (ev, picker) {
            $(this).val('');
        });
    });
</script>
}

<script>
    //function changeColor() {
    //document.querySelector(".page").style.color = '#26bec9';
    ////border: 1px solid #ccc;background-color:  
    //}

    ///
    //let pagbtns = document.querySelectorAll(".click_num")

    //pagbtns.forEach((item, index) => {
    //    item.addEventListener("click", function(event){
    //        if (item.hasAttribute("checked")) {
    //            item.style = "border: 1px solid #ccc; background-color: #26bec9;"
    //        }
    //        else{
    //            item.style = ""
    //        }
    //    })
    //})

    //for (i in obj) {
    //    if (obj[i].checked) {
    //        chipname.style.backgroundColor = "red";
    //        chipname.removeAttribute("disabled");//移除disabled

    //            check_value.push(obj[i].value);
    //    }
    //    else {
    //        chipname.disadled = "disabled";
    //    }
    //}

    //function changeColor() {
    //    pagechange = document.getElementById("btn")
    //    //if(pagechange.checked){
    //    //    pagechange.style.background='#5e2e2e';
    //    //}
    //    //else{
    //    //    pagechange.style=""
    //    //}

    //}
    function filterGet() {
        const request = new Request("/api/ClassifyApi/Classify");
        fetch(request)
    }
    let p = document.querySelectorAll(".click_num")
    for (let i = 0; i < p.length; i++) {
        p[i].addEventListener("click", function () {
            p[i].classList.add("btn-info")
        })
    }
    async function postAndChangePages() {
        await filterPost(1);
    }

    async function filterPost(page) {
        var citiesChecked = document.querySelectorAll('input.city_PC:checked')
        var selfformchecked = document.querySelectorAll('input.selfform-check:checked')
        var citiescategorieschecked = document.querySelectorAll('input.selfform-city:checked')

        fetch("/api/ClassifyApi/Classify", {
            method: 'post',
            headers: {
                'content-type': 'application/json;charset=utf-8',
            },
            body: JSON.stringify({
                cities: Array.from(citiesChecked).map(x => x.value),
                categories: Array.from(selfformchecked).map(x => x.value),
                citiescategories: Array.from(citiescategorieschecked).map(x => x.value),
                page: page,
            })
        })
            .then(resp => resp.json())
            .then(JSobj => {
                console.log(JSobj)
                //重新處理DOM
                if (classifyCardVue.cardCount != JSobj.cardCount)
                    classifyCardVue.cardCount = JSobj.cardCount

                classifyCardVue.productCards =
                    JSobj.classifyCardList.map(x => {
                        x.href = `/Product/ProductInfo/${x.productId}`
                        document.querySelector('.experience-itinerary').innerHTML = JSobj.cardCount
                        return x;
                    })
                classifyCardVue.page = page;
                document.querySelector('#destFilter').focus();
            })
    @* OriginalPrice/Price *@
                .then(() => {
            let OriginalPrice = document.querySelectorAll('.OriginalPrice')
            let Price = document.querySelectorAll('.Price')
            OriginalPrice.forEach((item, index) => {
                if (item.innerText === Price[index].innerText) {
                    item.classList.add("d-none")
                }
            })
        })

    @* categories *@
        .then(() => {
            $('.chip').remove();
            $('.chip-clear').remove();
            let selfform_city = document.querySelector('.selfform-city')
            let outside = document.querySelector('.chip-group')
            let filter = document.querySelectorAll('.filter')
            let cityfilter = document.querySelectorAll('.cityfilter')
            let citiescategories = Array.from(citiescategorieschecked).map(x => x.value)
            let cities = Array.from(citiesChecked).map(x => x.value)

            //for (let i = 0; i < citiescategories.length; i++) {
            //    let area = document.createElement('span');
            //    area.setAttribute('class', 'chip shadow-none rounded-pill border border-secondary d-flex align-items-center');
            //    let text = document.createElement('span');
            //    text.innerHTML = filter[citiescategories[i] - 13].innerText
            //    //text.innerHTML=filter[cities[i]-13].innerText
            //    let X = document.createElement('button');
            //    X.setAttribute('class', 'btn-close');
            //    X.setAttribute('aria-label', 'Close');
            //    //
            //    //OriginalPrice = (c.Prices == null || c.Prices.OriginalPrice == c.Prices.Price) ? null : c.Prices.OriginalPrice,
            //    //UnitPrice = (c.Prices == null) ? null : c.Prices.Price,
            //    //
            //    area.append(text);
            //    area.append(X);
            //    outside.append(area);
            //}
            for (let i = 0; i < cities.length; i++) {
                let area = document.createElement('span');
                area.setAttribute('class', 'chip shadow-none rounded-pill border border-secondary d-flex align-items-center');
                let text = document.createElement('span');
                text.innerHTML = cityfilter[cities[i] - 1].innerText
                //text.innerHTML=filter[cities[i]-13].innerText
                let X = document.createElement('button');
                X.setAttribute('class', 'btn-close');
                X.setAttribute('aria-label', 'Close');
                //
                //OriginalPrice = (c.Prices == null || c.Prices.OriginalPrice == c.Prices.Price) ? null : c.Prices.OriginalPrice,
                //UnitPrice = (c.Prices == null) ? null : c.Prices.Price,
                //
                area.append(text);
                area.append(X);
                outside.append(area);
            }

            //if (citiescategories.length >= 1) {
            //    $(".chip-group").append('<span class="chip-clear rounded-pill d-flex align-items-center "><a href="#" class="a text-decoration-none text-light">清除所有</a></span>')
            //    let span = document.querySelectorAll(".chip")
            //    let closebtn = document.querySelectorAll(".chip .btn-close")
            //    closebtn.forEach((item, index) => {
            //        item.addEventListener("click", function (event) {
            //            span[index].remove()
            //        })
            //    })
            //    let chip_clear = document.querySelector(".chip-clear")
            //    chip_clear.addEventListener("click", () => {
            //        window.location.reload()
            //    })
            //}
            if (cities.length >= 1) {
                $(".chip-group").append('<span class="chip-clear rounded-pill d-flex align-items-center "><a href="#" class="a text-decoration-none text-light">清除所有</a></span>')
                let span = document.querySelectorAll(".chip")
                let closebtn = document.querySelectorAll(".chip .btn-close")
                closebtn.forEach((item, index) => {
                    item.addEventListener("click", function (event) {
                        span[index].remove()
                    })
                })
                let chip_clear = document.querySelector(".chip-clear")
                chip_clear.addEventListener("click", () => {
                    window.location.reload()
                })
            }

        })
    @* city *@
        //.then(() => {
        //    $('.chip').remove();
        //    $('.chip-clear').remove();
        //    let outsidee = document.querySelector('.chip-group')
        //    let filter = document.querySelectorAll('.filter')
        //    let cities = Array.from(citiesChecked).map(x => x.value)
        //    for (let i = 0; i < cities.length; i++) {
        //        let areaa = document.createElement('span');
        //        areaa.setAttribute('class', 'chip shadow-none rounded-pill border border-secondary d-flex align-items-center');
        //        let textt = document.createElement('span');
        //        textt.innerHTML = filter[cities[i] - 27].innerText
        //        //text.innerHTML=filter[cities[i]-13].innerText
        //        let X = document.createElement('button');
        //        X.setAttribute('class', 'btn-close');
        //        X.setAttribute('aria-label', 'Close');
        //        //
        //        //OriginalPrice = (c.Prices == null || c.Prices.OriginalPrice == c.Prices.Price) ? null : c.Prices.OriginalPrice,
        //        //UnitPrice = (c.Prices == null) ? null : c.Prices.Price,
        //        //
        //        areaa.append(textt);
        //        areaa.append(X);
        //        outsidee.append(areaa);
        //    }
        //    if (cities.length >= 1) {
        //        $(".chip-group").append('<span class="chip-clear rounded-pill d-flex align-items-center "><a href="#" class="a text-decoration-none text-light">清除所有</a></span>')
        //        let span = document.querySelectorAll(".chip")
        //        let closebtn = document.querySelectorAll(".chip .btn-close")
        //        closebtn.forEach((item, index) => {
        //            item.addEventListener("click", function (event) {
        //                span[index].remove()
        //            })
        //        })
        //        let chip_clear = document.querySelector(".chip-clear")
        //        chip_clear.addEventListener("click", () => {
        //            window.location.reload()
        //        })
        //    }
        //})
    }
    let btn_clean_destination = document.querySelector(".btn-clean-destination")
    btn_clean_destination.addEventListener("click", () => {
        for (let i = 0; i < document.querySelectorAll('.city_PC').length; i++) {
            document.querySelectorAll('.city_PC')[i].checked = false
        }
        //  toastr.options = {
        //    positionClass: 'toast-top-center',
        //  }
        //  $('#button-demo').click(function(){
        //toastr.success('.city_PC');
        //  });

        //toastr.options = {
        // // 參數設定[註1]
        // "closeButton": false, // 顯示關閉按鈕
        // "debug": false, // 除錯
        // "newestOnTop": false,  // 最新一筆顯示在最上面
        // "progressBar": true, // 顯示隱藏時間進度條
        // "positionClass": "toast-top-center", // 位置的類別
        // "preventDuplicates": false, // 隱藏重覆訊息
        // "onclick": null, // 當點選提示訊息時，則執行此函式
        // "showDuration": "300", // 顯示時間(單位: 毫秒)
        // "hideDuration": "1000", // 隱藏時間(單位: 毫秒)
        // "timeOut": "5000", // 當超過此設定時間時，則隱藏提示訊息(單位: 毫秒)
        // "extendedTimeOut": "1000", // 當使用者觸碰到提示訊息時，離開後超過此設定時間則隱藏提示訊息(單位: 毫秒)
        // "showEasing": "swing", // 顯示動畫時間曲線
        // "hideEasing": "linear", // 隱藏動畫時間曲線
        // "showMethod": "fadeIn", // 顯示動畫效果
        // "hideMethod": "fadeOut" // 隱藏動畫效果
        //}
        //toastr.success( "Success" );
        //toastr.warning( "Warning" );
        //toastr.error( "Error" );



        //window.location.reload()
        //document.querySelectorAll('#offcanvasBottom').style.visibility='visible'

        //document.querySelectorAll('#offcanvasBottom').classList.add('show')
        //visibility: visible;
    })
            //全選
        //let allform_check = document.querySelector(".allform-check")
        //let selfform_check = document.querySelector(".selfform-check")
        //    allform_check.addEventListener("click",()=>{
        //            for (let i = 0; i < document.querySelectorAll('.selfform-check').length; i++) {
        //                document.querySelectorAll('.selfform-check')[i].checked = true
        //                }
        //        }
        //    )

        //let btn_finish = document.querySelector(".btn-finish-destination")
        //    btn_finish.addEventListener("click",()=>{
        //            for (let i = 0; i < document.querySelectorAll('.city_PC').length; i++) {
        //                document.querySelectorAll('.city_PC')[i].checked = true
        //                }
        //    }
        //)

        //let selfform_check_label = document.querySelector(".self-form-check-label").innerText
        //let chip = document.querySelector(".chip").innerText
        //    selfform_check_label.addEventListener("click",()=>{
        //        if (selfform_check_label == true) {//按鈕已選中
        //            chip.style.backgroundColor = "red";
        //            chip.removeAttribute("disabled");//移除disabled
        //        }
        //        else {
        //            chip.disadled = "disabled";
        //        }
        //    })

            //function show() {
            //    obj = document.getElementsByName("checkboxs");
            //    chipname =document.querySelector(".chipname")
            //    check_value = [];
            //        for (i in obj) {
            //            if (obj[i].checked) {
            //                chipname.style.backgroundColor = "red";
            //                chipname.removeAttribute("disabled");//移除disabled

            //                    check_value.push(obj[i].value);
            //            }
            //            else {
            //                chipname.disadled = "disabled";
            //            }
            //        }
            //        //show.check_value
            //        alert(check_value);
            //}


        //let chip_clear = document.querySelector(".chip-clear")
        //    chip_clear.addEventListener("click",()=>{
        //            //for (let i = 0; i < document.querySelectorAll('.selfform-check').length; i++) {
        //            //    document.querySelectorAll('.selfform-check')[i].checked = false
        //            // }
        //             window.location.reload()
        //        }
        //    )


</script>
